<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DBPrinters Window</title>
    <script src="dbprintersScript.js"></script>
    <link rel="stylesheet" href="dbprintersStyles.css" />
    <link rel="stylesheet" href="combobox.css" />
    <link rel="stylesheet" href="context-menu.css" />
  </head>
  <body class="hftest-body">
		<div class="hftest-container-testcomplete">
			<div class="temp-data">
				<h1>Image to show test is Complete</h1>
			</div>
		</div>
		<div id="hftest" class="hftest-container">

    	<!-- BUTTON -->
			<button
				id="btn-completetest"
      	class="location-two dbprint-button"
			>
				Send to Printer
			</button>

    	<!-- OVERLAY MASK -->
			<div id="js-overlayMask"></div>

    	<!-- COMBOBOX -->
			<div class="location-one dbprint-combobox" id="js-comboboxContainer">
				<div class="combobox" id="js-inputCombobox">
					<input
						type="text"
						name="comboboxfieldname"
						id="cb_identifier"
						class="inputCombobox"
						data-list-is-open="false"
						data-current-selection
					/>
					<span class="iconChevron">â–¾</span>
					<div class="dropdownlist" id="js-dbprintersList" data-quicklist-mode="true">
						<p class="dropdownlist-hint" id="js-dbprintersList-hint">
							Enter 3 characters to search all...
						</p>
					</div>
				</div>
			</div>

    	<!-- SELECT -->
			<div class="location-one dbprint-select" id="js-selectContainer">
				<select class="inputSelect" id="js-dbprintersSelect" name="dbprint">
					<!-- options go here -->
					  <option id="js-selectEmptyOption" selected value="">&nbsp;</option>
				</select>
			</div>

			<!-- TEMP URL DATA -->
			<div class="temp-data">
				<h1>clientSize: <span id="feild-clientSize"></span></h1>
				<h1>defaultDevice: <span id="feild-defaultDevice"></span></h1>
				<h1>newUser: <span id="feild-newUser"></span></h1>
				<h1>newDBPrint: <span id="feild-newDBPrint"></span></h1>
				<h1>delay: <span id="feild-delay"></span></h1>
			</div>

		</div>
    <script type="text/javascript" charset="utf-8" src="combobox.js"></script>
    <script type="text/javascript" charset="utf-8">
      const no = new ComboBox("cb_identifier");
			const btn = document.querySelector("#btn-completetest");
			btn.addEventListener("click", completeTest);

			function completeTest() {
				const hftest = document.querySelector(".hftest-container");
				hftest.style.cursor = "wait";
				btn.style.cursor = "wait";
				setTimeout(() => {
					hftest.style.display = "none";
				}, "600")
			}

			// TEMP shows query parameters
			let queryStr = new URLSearchParams(window.location.search);
			let data = {
				clientSize: queryStr.get("clientSize") === "large" ? "large" : "small",
				defaultDevice: queryStr.get("defaultDevice") === "false" ? false : true,
				newUser: queryStr.get("newUser") === "false" ? false : true,
				newDBPrint: queryStr.get("newDBPrint") === "false" ? false : true,
				delay: parseInt(queryStr.get("delay")),
			};

			const clientSizeField = document.querySelector("#feild-clientSize");
			clientSizeField.innerHTML = data.clientSize;
			const defaultDeviceField = document.querySelector("#feild-defaultDevice");
			defaultDeviceField.innerHTML = data.defaultDevice;
			const newUserField = document.querySelector("#feild-newUser");
			newUserField.innerHTML = data.newUser;
			const newDBPrintField = document.querySelector("#feild-newDBPrint");
			newDBPrintField.innerHTML = data.newDBPrint;
			const delayField = document.querySelector("#feild-delay");
			delayField.innerHTML = data.delay;

			if (data.newDBPrint) {
				document.getElementById("js-selectContainer").remove();
			} else {
				document.getElementById("js-comboboxContainer").style.display = "none";
			}

    </script>
  </body>
</html>
